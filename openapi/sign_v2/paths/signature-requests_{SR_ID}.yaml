get:
  operationId: getSignatureRequestDetails
  tags:
    - Signature
  summary: Get the document ID from the signature request
  description: >-
    We distinguish between the signature request ID and document ID. To read and
    download the PDF document, the document ID is retrieved from the 
    `SignatureRequest` with the ID `{{SR_ID}}`
  security:
    - bearer: []
  parameters:
    - $ref: ../components/parameters/SignatureIDPath.yaml
  responses:
    200:
      description: OK
      content:
        application/json:
          schema:
            $ref: ../components/schemas/CreateSignatureResponse.yaml
          examples:
            default:
              # TDDO verify if different from Create and any default?
              $ref: ../components/examples/CreateSignatureResponse.yaml#/Default
    400:
      $ref: ../components/responses/BadRequest.yaml
      content:
        application/json:
          schema:
            $ref: ../components/schemas/BadRequestResponse.yaml
          example:
            # TDDO adjust answer
            type: "https://api.skribble.com/problem/problem-with-message"
            method: "POST"
            path: "/v2/signature-requests"
            status: 400
            message: "No document source found! Please use document_id, content or file_url to provide a document source"
    401:
      $ref: ../components/responses/Unauthorized.yaml
    429:
      $ref: ../components/responses/TooManyRequests.yaml
    500:
      $ref: ../components/responses/ServerError.yaml
    503:
      $ref: ../components/responses/ServiceUnavailable.yaml
delete:
  operationId: deleteSignatureRequest
  tags:
    - Signature
  summary: Delete a signature request
  description: >-
    By using the signature request ID you can delete a `SignatureRequest`.  
     
    **Important:** A `SignatureRequest` can only be deleted using the API, if:

    1. the `SignatureRequest` is in the `status_overall=OPEN` and

    2. the API user has sufficient rights on the `SignatureRequest`, eg. when it
    was created by the API user. 
      
    Deleting a `SignatureRequest` does not necessarily remove the
    `SignatureRequest` from the system. 
     
    **WITHDRAWN**  

    When the API user is the **owner** of the `SignatureRequest` and the
    `SignatureRequest` is still in the `status_overall=OPEN` then the
    `SignatureRequest` will be **WITHDRAWN**.  

    This means that the `SignatureRequest` will get `status_overall=WITHDRAWN`
    and all the invited signatures will be marked with `status_code=WITHDRAWN`.
    Sign and read rights for the signers will be removed from the
    `SignatureRequest`, so that the invited signers can neither read nor sign
    the `SignatureRequest` any more. 


    **REMOVE AS PARTICIPANT**  

    When the API user is NOT the owner of the document but a participant of the
    `SignatureRequest`, then the `DELETE` request will only remove the current
    API user as participant from the signature request. 

    In this case the system will remove the objects the `SignatureRequest` and
    the related `document` as soon as the last remaining user deletes the
    `SignatureRequest` using the [Skribble web
    application](https://my.skribble.com) 


    **DELETING**  

    When the API user is the last user with access rights to the
    `SignatureRequest` e.g. after a **WITHDRAW** request, then the
    `SignatureRequest` and the related `document` will be completely removed
    from the system.
  security:
    - bearer: []
  parameters:
    - $ref: ../components/parameters/SignatureIDPath.yaml
  responses:
    '200':
      description: OK
    '400':
      # TDDO adjust answer
      $ref: ../components/responses/BadRequest.yaml
    '401':
      $ref: ../components/responses/Unauthorized.yaml
    '404':
      $ref: ../components/responses/NotFound.yaml
    '429':
      $ref: ../components/responses/TooManyRequests.yaml
    '500':
      $ref: ../components/responses/ServerError.yaml
    '503':
      $ref: ../components/responses/ServiceUnavailable.yaml
