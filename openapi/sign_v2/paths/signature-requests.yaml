post:
  tags:
    - Signature
  summary: Create a signature request
  description: |
    The `SignatureRequest` object is the primary object of the Skribble API .
    It describes who signs what and how. It gives an overview of the current state 
    of the single Signatures and allows to control user rights or callback functionality.
  operationId: createSignatureRequest
  security:
    - bearer: []
  requestBody:
    description: Request body to create a SignatureRequest object
    required: true
    content:
      application/json:
        schema:
          $ref: ../components/schemas/CreateSignatureRequest.yaml
        examples:
          PDFBase64:
            $ref: ../components/examples/CreateSignatureBasic.yaml#/PDFBase64
          PDFFileURL:
            $ref: ../components/examples/CreateSignatureBasic.yaml#/PDFFileURL
          PDFExistingDoc:
            $ref: ../components/examples/CreateSignatureBasic.yaml#/PDFExistingDoc
  responses:
    200:
      description: OK
      content:
        application/json:
          schema:
            $ref: ../components/schemas/SignatureResponse.yaml
          examples:
            Sample1:
              $ref: ../components/examples/CreateSignatureResponse.yaml#/Sample1
            Sample2:
              $ref: ../components/examples/CreateSignatureResponse.yaml#/Sample2
    400:
      $ref: ../components/responses/BadRequest.yaml
      content:
        application/json:
          schema:
            $ref: ../components/schemas/BadRequestResponse.yaml
          example:
            type: "https://api.skribble.com/problem/problem-with-message"
            method: "POST"
            path: "/v2/signature-requests"
            status: 400
            message: "No document source found! Please use document_id, content or file_url to provide a document source"
    401:
      $ref: ../components/responses/Unauthorized.yaml
    429:
      $ref: ../components/responses/TooManyRequests.yaml
    500:
      $ref: ../components/responses/ServerError.yaml
    503:
      $ref: ../components/responses/ServiceUnavailable.yaml
get:
  tags:
    - Signature
  summary: List and find Signature Requests
  description: |
    Using this `GET` request, you can list all the `SignatureRequest` provided
    that the current user has sufficient access rights to.


    **Filter**


    You can optionally filter these `SignatureRequest` using one or more of the
    optional parameters.  


    The filter searches for an exact match of the corresponding field
    content. This means that the filter is case sensitive and find objects
    that only _contain_ the parameter. For example _account_email=john.doe@skribble.com_ 
    will only find a `SignatureRequest` where the field `account_email` is exactly
    john.doe@skribble.com and it won't find another.john.doe@skribble.com


    Exception: The search parameter searches for document titles that contain
    the search term. 
  

    **Pagination** 


    Furthermore, the result set can be controlled using the optional pagination
    parameters `page_number` and `page_size`, which helps prevent excessively
    large result sets.
  operationId: getSignatureRequest
  security:
    - bearer: []
  parameters:
    - $ref: ../components/parameters/SignatureAccountMail.yaml
    - $ref: ../components/parameters/SignatureSearch.yaml
    - $ref: ../components/parameters/SignatureStatusCode.yaml
    - $ref: ../components/parameters/SignatureStatusOverall.yaml
    - $ref: ../components/parameters/PageNumber.yaml
    - $ref: ../components/parameters/PageSize.yaml
  responses:
    200:
      description: OK
      content:
        application/json:
          schema:
            type: array
            description: List of Signature Requests.
            items:
              $ref: ../components/schemas/SignatureResponse.yaml
          examples:
            default:
              $ref: ../components/examples/CreateSignatureResponse.yaml#/SampleArray            
    400:
      $ref: ../components/responses/BadRequest.yaml
    401:
      $ref: ../components/responses/Unauthorized.yaml
    403:
      $ref: ../components/responses/Forbidden.yaml
    429:
      $ref: ../components/responses/TooManyRequests.yaml
    500:
      $ref: ../components/responses/ServerError.yaml
    503:
      $ref: ../components/responses/ServiceUnavailable.yaml
put:
  # TODO: Update this
  tags:
    - Signature
  summary: Update a Signature Request
  description: |
    Modifications on existing `SignatureRequest` should be handled with care.
    We recommend creating the `SignatureRequest` with all necessary information. 


    To add or remove multiple signers at once, you need to update the
    `signatures` array according to your needs.

    - To add a signer to the `SignatureRequest`, simply add a new entry to the
    signatures array.
        
    - To remove a signer from the `SignatureRequest`, simply remove the
    corresponding entry from the `signatures` array.
        

    > ⚠️ **IMPORTANT NOTE** 
      

    - Please be aware that if you want to add one or more new signers, you MUST
    include the existing signers in the update request. Any signers not present
    in the `signatures` array will be removed!
        
    - Changes to the signatures can only be made as long as none of the signers
    have already completed the signature.
  operationId: updateSignatureRequest
  # TODO: This should go under {SR_ID} with put
  security:
    - bearer: []
  requestBody:
    description: Request body to update a SignatureRequest object
    required: true
    content:
      application/json:
        schema:
          $ref: ../components/schemas/UpdateSignatureRequest.yaml
  responses:
    200:
      description: OK
      content:
        application/json:
          schema:
            $ref: ../components/schemas/SignatureResponse.yaml
    400:
      $ref: ../components/responses/BadRequest.yaml
    403:
      $ref: ../components/responses/Forbidden.yaml
    401:
      $ref: ../components/responses/Unauthorized.yaml
    429:
      $ref: ../components/responses/TooManyRequests.yaml
    500:
      $ref: ../components/responses/ServerError.yaml
    503:
      $ref: ../components/responses/ServiceUnavailable.yaml
